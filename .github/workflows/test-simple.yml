name: Simple Test Build

on:
  workflow_dispatch:

jobs:
  test-build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        python -m pip install maturin
    
    - name: Build package
      run: |
        maturin build --release
    
    - name: Test import
      run: |
        # Install the built wheel instead of using maturin develop
        pip install target/wheels/*.whl
        python -c "import query_builder; print('âœ… Package works!')"
    
    - name: Show files
      run: |
        ls -la target/wheels/ || echo "No wheels directory"
        find . -name "*.whl" || echo "No wheel files found"